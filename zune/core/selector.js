export default(async(e,t)=>{if("insert"===e){let[n,r,l,_]=t,i=n.length;if(i<2)return!1;let a=11===n[1].nodeType;if(!isElem(n[1])&&!a||!r(n[0]))return!1;let f=i>2?n[2]:null,u=i>3&&n[3];(!0===f||!1===f)&&(u=f,f=null),f=l(f);let o="";if(a&&((o=document.createElement("div")).appendChild(n[1]),o=o.innerHTML),u&&isElem(n[0]))return a?n[0].insertAdjacentHTML(f,o):n[0].insertAdjacentElement(f,n[1]);{let c=[];return a?_(n[0]).forEach(e=>e.insertAdjacentHTML(f,o)):(_(n[0]).forEach(e=>{let t=n[1].cloneNode(!0);e.insertAdjacentElement(f,t),c.push(t)}),u&&n[1].remove()),!c.length||(isElem(n[0])?c[0]:c)}}if("replace"===e){let[s,d,h]=t,p=s.length;if(p<2||!d(s[0]))return!1;let m=p>2&&!0===s[2],E=h(s[1]),g=E.length;if(m&&isElem(s[0]))return s[0].replaceWith(...E),1===g?E[0]:E;{let T=[];return h(s[0]).forEach(e=>{let t=E.map(e=>e.cloneNode(!0));e.replaceWith(...t),T.push(t)}),m&&E.map(e=>e.remove()),isElem(s[0])?1===g?T[0][0]:T[0]:1===g?T.flat():T}}if("swap"===e){let L=t[0];if(L.length<2||!isElem(L[0])||!isElem(L[1])||L[0]===L[1])return!1;let N=L[0].$(".."),O=L[1].$("..");if(!N||!O)return!1;let b=[!1,!1];if(N===O){let[j,A]=L[0].compareDocumentPosition(L[1])&Node.DOCUMENT_POSITION_FOLLOWING?[L[0].$("<<")||null,L[1].$(">>")||null]:[L[1].$(">>")||null,L[0].$("<<")||null];b=[$.insert(A||N,L[0],A?"before":"end",!0),$.insert(j||N,L[1],j?"after":"begin",!0)]}else{let M=L[0].$(">>"),v=L[1].$(">>");b=[$.insert(v||O,L[0],v?"before":"end",!0),$.insert(M||N,L[1],M?"before":"end",!0)]}return!!isElem(b[0],b[1])&&b}});